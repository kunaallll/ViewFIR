{"ast":null,"code":"// src/components/ViewData.js\nimport React,{useState}from\"react\";import{TextField,Button,Typography,Box,Grid,Card,CardContent,CardActions,Link as MuiLink,Snackbar}from\"@mui/material\";import axios from\"axios\";import CircularProgress from\"@mui/material/CircularProgress\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ViewData=()=>{const[searchParams,setSearchParams]=useState({year:\"\",id:\"\"});const[itemData,setItemData]=useState(null);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);// State to handle error messages\nconst handleInputChange=e=>{const{name,value}=e.target;setSearchParams({...searchParams,[name]:value});};const handleSearch=async()=>{setLoading(true);setError(null);// Reset any previous errors\ntry{const{year,id}=searchParams;// Ensure year and id are treated as strings\nconst response=await axios.get(`https://viewfirbackend.onrender.com/items/view-item/${String(year)}/${String(id)}`,{headers:{Authorization:`Bearer ${localStorage.getItem(\"token\")}`// Ensure you're passing the token\n}});setItemData(response.data);}catch(error){console.error(\"Error fetching item:\",error);setError(\"Item not found. Please check the ID and Year.\");// Update error message\nsetItemData(null);}finally{setLoading(false);}};const handleCloseSnackbar=()=>{setError(null);// Close the snackbar\n};return/*#__PURE__*/_jsxs(Box,{sx:{maxWidth:600,mx:\"auto\",p:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",gutterBottom:true,children:\"View Data\"}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{name:\"year\",label:\"Year\",value:searchParams.year,onChange:handleInputChange,fullWidth:true,required:true})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{name:\"id\",label:\"FIR\",type:\"number\",value:searchParams.id,onChange:handleInputChange,fullWidth:true,required:true})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",fullWidth:true,onClick:handleSearch,children:\"Search\"})})]}),loading?/*#__PURE__*/_jsx(CircularProgress,{sx:{mt:4}}):itemData&&/*#__PURE__*/_jsxs(Card,{sx:{mt:4},children:[/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",children:\"Person Details\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"body1\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"FIR:\"}),\" \",itemData.id]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body1\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Year:\"}),\" \",itemData.year]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body1\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"District:\"}),\" \",itemData.district]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body1\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"City:\"}),\" \",itemData.city]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body1\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Address:\"}),\" \",itemData.address]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body1\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Name:\"}),\" \",itemData.name]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body1\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Phone Number:\"}),\" \",itemData.phone_number]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body1\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Upload Date:\"}),\" \",itemData.upload_date?new Date(itemData.upload_date._seconds*1000).toLocaleString():\"N/A\"]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body1\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Last Viewed:\"}),\" \",itemData.recent_view?new Date(itemData.recent_view._seconds*1000).toLocaleString():\"Never\"]})]}),/*#__PURE__*/_jsx(CardActions,{children:itemData.file_url&&/*#__PURE__*/_jsx(Button,{size:\"small\",color:\"primary\",component:MuiLink,href:itemData.file_url,target:\"_blank\",children:\"View File\"})})]}),/*#__PURE__*/_jsx(Snackbar,{open:Boolean(error),autoHideDuration:6000,onClose:handleCloseSnackbar,message:error})]});};export default ViewData;","map":{"version":3,"names":["React","useState","TextField","Button","Typography","Box","Grid","Card","CardContent","CardActions","Link","MuiLink","Snackbar","axios","CircularProgress","jsx","_jsx","jsxs","_jsxs","ViewData","searchParams","setSearchParams","year","id","itemData","setItemData","loading","setLoading","error","setError","handleInputChange","e","name","value","target","handleSearch","response","get","String","headers","Authorization","localStorage","getItem","data","console","handleCloseSnackbar","sx","maxWidth","mx","p","children","variant","gutterBottom","container","spacing","item","xs","label","onChange","fullWidth","required","type","color","onClick","mt","district","city","address","phone_number","upload_date","Date","_seconds","toLocaleString","recent_view","file_url","size","component","href","open","Boolean","autoHideDuration","onClose","message"],"sources":["C:/Users/kunal/OneDrive/Desktop/react/ViewFIR/src/components/ViewData.js"],"sourcesContent":["// src/components/ViewData.js\r\nimport React, { useState } from \"react\";\r\nimport {\r\n  TextField,\r\n  Button,\r\n  Typography,\r\n  Box,\r\n  Grid,\r\n  Card,\r\n  CardContent,\r\n  CardActions,\r\n  Link as MuiLink,\r\n  Snackbar,\r\n} from \"@mui/material\";\r\nimport axios from \"axios\";\r\nimport CircularProgress from \"@mui/material/CircularProgress\";\r\n\r\nconst ViewData = () => {\r\n  const [searchParams, setSearchParams] = useState({\r\n    year: \"\",\r\n    id: \"\",\r\n  });\r\n\r\n  const [itemData, setItemData] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null); // State to handle error messages\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setSearchParams({ ...searchParams, [name]: value });\r\n  };\r\n\r\n  const handleSearch = async () => {\r\n    setLoading(true);\r\n    setError(null); // Reset any previous errors\r\n    try {\r\n      const { year, id } = searchParams;\r\n      // Ensure year and id are treated as strings\r\n      const response = await axios.get(\r\n        `https://viewfirbackend.onrender.com/items/view-item/${String(year)}/${String(id)}`,\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem(\"token\")}`, // Ensure you're passing the token\r\n          },\r\n        }\r\n      );\r\n      setItemData(response.data);\r\n    } catch (error) {\r\n      console.error(\"Error fetching item:\", error);\r\n      setError(\"Item not found. Please check the ID and Year.\"); // Update error message\r\n      setItemData(null);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleCloseSnackbar = () => {\r\n    setError(null); // Close the snackbar\r\n  };\r\n\r\n  return (\r\n    <Box sx={{ maxWidth: 600, mx: \"auto\", p: 2 }}>\r\n      <Typography variant=\"h4\" gutterBottom>\r\n        View Data\r\n      </Typography>\r\n      <Grid container spacing={2}>\r\n        {/* Year */}\r\n        <Grid item xs={12}>\r\n          <TextField\r\n            name=\"year\"\r\n            label=\"Year\"\r\n            value={searchParams.year}\r\n            onChange={handleInputChange}\r\n            fullWidth\r\n            required\r\n          />\r\n        </Grid>\r\n\r\n        {/* ID */}\r\n        <Grid item xs={12}>\r\n          <TextField\r\n            name=\"id\"\r\n            label=\"FIR\"\r\n            type=\"number\"\r\n            value={searchParams.id}\r\n            onChange={handleInputChange}\r\n            fullWidth\r\n            required\r\n          />\r\n        </Grid>\r\n\r\n        {/* Search Button */}\r\n        <Grid item xs={12}>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            fullWidth\r\n            onClick={handleSearch}\r\n          >\r\n            Search\r\n          </Button>\r\n        </Grid>\r\n      </Grid>\r\n\r\n      {/* Loading Indicator */}\r\n      {loading ? (\r\n        <CircularProgress sx={{ mt: 4 }} />\r\n      ) : (\r\n        itemData && (\r\n          <Card sx={{ mt: 4 }}>\r\n            <CardContent>\r\n              <Typography variant=\"h5\">Person Details</Typography>\r\n              <Typography variant=\"body1\">\r\n                <strong>FIR:</strong> {itemData.id}\r\n              </Typography>\r\n              <Typography variant=\"body1\">\r\n                <strong>Year:</strong> {itemData.year}\r\n              </Typography>\r\n              <Typography variant=\"body1\">\r\n                <strong>District:</strong> {itemData.district}\r\n              </Typography>\r\n              <Typography variant=\"body1\">\r\n                <strong>City:</strong> {itemData.city}\r\n              </Typography>\r\n              <Typography variant=\"body1\">\r\n                <strong>Address:</strong> {itemData.address}\r\n              </Typography>\r\n              <Typography variant=\"body1\">\r\n                <strong>Name:</strong> {itemData.name}\r\n              </Typography>\r\n              <Typography variant=\"body1\">\r\n                <strong>Phone Number:</strong> {itemData.phone_number}\r\n              </Typography>\r\n              <Typography variant=\"body1\">\r\n                <strong>Upload Date:</strong>{\" \"}\r\n                {itemData.upload_date\r\n                  ? new Date(\r\n                      itemData.upload_date._seconds * 1000\r\n                    ).toLocaleString()\r\n                  : \"N/A\"}\r\n              </Typography>\r\n              <Typography variant=\"body1\">\r\n                <strong>Last Viewed:</strong>{\" \"}\r\n                {itemData.recent_view\r\n                  ? new Date(\r\n                      itemData.recent_view._seconds * 1000\r\n                    ).toLocaleString()\r\n                  : \"Never\"}\r\n              </Typography>\r\n            </CardContent>\r\n            <CardActions>\r\n              {itemData.file_url && (\r\n                <Button\r\n                  size=\"small\"\r\n                  color=\"primary\"\r\n                  component={MuiLink}\r\n                  href={itemData.file_url}\r\n                  target=\"_blank\"\r\n                >\r\n                  View File\r\n                </Button>\r\n              )}\r\n            </CardActions>\r\n          </Card>\r\n        )\r\n      )}\r\n\r\n      {/* Error Snackbar */}\r\n      <Snackbar\r\n        open={Boolean(error)}\r\n        autoHideDuration={6000}\r\n        onClose={handleCloseSnackbar}\r\n        message={error}\r\n      />\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default ViewData;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}